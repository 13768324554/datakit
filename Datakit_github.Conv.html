<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Datakit_github.Diff.html">
<link rel="next" href="Datakit_github.Sync.html">
<link rel="Up" href="Datakit_github.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Vfs" rel="Chapter" href="Vfs.html">
<link title="Fs9p" rel="Chapter" href="Fs9p.html">
<link title="Ivfs" rel="Chapter" href="Ivfs.html">
<link title="Ivfs_tree" rel="Chapter" href="Ivfs_tree.html">
<link title="Ivfs_remote" rel="Chapter" href="Ivfs_remote.html">
<link title="Ivfs_blob" rel="Chapter" href="Ivfs_blob.html">
<link title="Datakit_path" rel="Chapter" href="Datakit_path.html">
<link title="Datakit_S" rel="Chapter" href="Datakit_S.html">
<link title="Datakit_client_9p" rel="Chapter" href="Datakit_client_9p.html">
<link title="Datakit_github" rel="Chapter" href="Datakit_github.html">
<link title="Datakit_github_api" rel="Chapter" href="Datakit_github_api.html">
<link title="Datakit_github_vfs" rel="Chapter" href="Datakit_github_vfs.html"><link title="Trees" rel="Section" href="#1_Trees">
<link title="Repositories" rel="Section" href="#1_Repositories">
<link title="Status" rel="Section" href="#1_Status">
<link title="Pull requests" rel="Section" href="#1_Pullrequests">
<link title="Snapshots and diffs" rel="Section" href="#1_Snapshotsanddiffs">
<title>Datakit_github.Conv</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Datakit_github.Diff.html" title="Datakit_github.Diff">Previous</a>
&nbsp;<a class="up" href="Datakit_github.html" title="Datakit_github">Up</a>
&nbsp;<a class="post" href="Datakit_github.Sync.html" title="Datakit_github.Sync">Next</a>
</div>
<h1>Functor <a href="type_Datakit_github.Conv.html">Datakit_github.Conv</a></h1>

<pre><span class="keyword">module</span> Conv: <div class="sig_block"><code class="code"><span class="keyword">functor</span> (</code><code class="code"><span class="constructor">DK</span></code><code class="code"> : </code><code class="type"><a href="Datakit_S.CLIENT.html">Datakit_S.CLIENT</a></code><code class="code">) <span class="keywordsign">-&gt;</span> </code><code class="code"><span class="keyword">sig</span></code> <a href="Datakit_github.Conv.html">..</a> <code class="code"><span class="keyword">end</span></code></div></pre><div class="info module top">
Conversion between GitHub and DataKit states.<br>
</div>
<table border="0" cellpadding="3" width="100%">
<tr>
<td align="left" valign="top" width="1%%"><b>Parameters: </b></td>
<td>
<table class="paramstable">
<tr>
<td align="center" valign="top" width="15%">
<code>DK</code></td>
<td align="center" valign="top">:</td>
<td><code class="type"><a href="Datakit_S.CLIENT.html">Datakit_S.CLIENT</a></code>
</table>
</td>
</tr>
</table>
<hr width="100%">

<pre><span id="TYPEresult"><span class="keyword">type</span> <code class="type">'a</code> result</span> = <code class="type">('a, DK.error) Result.result Lwt.t</code> </pre>
<div class="info ">
The type for conversion results.<br>
</div>

<br>
<h1 id="1_Trees">Trees</h1><br>

<pre><span id="TYPEtree"><span class="keyword">type</span> <code class="type"></code>tree</span> </pre>
<div class="info ">
The type for readable filesystem trees.<br>
</div>


<pre><span id="VALtree_of_transaction"><span class="keyword">val</span> tree_of_transaction</span> : <code class="type">DK.Transaction.t -> <a href="Datakit_github.Conv.html#TYPEtree">tree</a></code></pre><div class="info ">
<code class="code">tree_of_transaction t</code> is <code class="code">t</code>'s filesystem <code class="code">tree</code>.<br>
</div>

<pre><span id="VALtree_of_commit"><span class="keyword">val</span> tree_of_commit</span> : <code class="type">DK.Commit.t -> <a href="Datakit_github.Conv.html#TYPEtree">tree</a></code></pre><div class="info ">
<code class="code">tree_of_commit c</code> is <code class="code">c</code>'s filesystem <code class="code">tree</code>.<br>
</div>
<br>
<h1 id="1_Repositories">Repositories</h1><br>

<pre><span id="VALrepos"><span class="keyword">val</span> repos</span> : <code class="type"><a href="Datakit_github.Conv.html#TYPEtree">tree</a> -><br>       Datakit_github.Repo.Set.t <a href="Datakit_github.Conv.html#TYPEresult">result</a></code></pre><div class="info ">
<code class="code">repos t</code> is the list of repositories stored in <code class="code">t</code>.<br>
</div>
<br>
<h1 id="1_Status">Status</h1><br>

<pre><span id="VALstatus"><span class="keyword">val</span> status</span> : <code class="type"><a href="Datakit_github.Conv.html#TYPEtree">tree</a> -><br>       user:string -><br>       repo:string -><br>       commit:string -><br>       context:string list -><br>       <a href="Datakit_github.Status.html#TYPEt">Datakit_github.Status.t</a> option <a href="Datakit_github.Conv.html#TYPEresult">result</a></code></pre><div class="info ">
<code class="code">status t ~user ~repo ~commit ~context</code> is the commit's
      build status for the repository <code class="code">user/repo</code> in the tree <code class="code">t</code>.<br>
</div>

<pre><span id="VALstatuses"><span class="keyword">val</span> statuses</span> : <code class="type">?repos:Datakit_github.Repo.Set.t -><br>       <a href="Datakit_github.Conv.html#TYPEtree">tree</a> -><br>       Datakit_github.Status.Set.t <a href="Datakit_github.Conv.html#TYPEresult">result</a></code></pre><div class="info ">
<code class="code">statuses t</code> is the list of status stored in <code class="code">t</code>..<br>
</div>

<pre><span id="VALupdate_status"><span class="keyword">val</span> update_status</span> : <code class="type">DK.Transaction.t -><br>       <a href="Datakit_github.Status.html#TYPEt">Datakit_github.Status.t</a> -> unit <a href="Datakit_github.Conv.html#TYPEresult">result</a></code></pre><div class="info ">
<code class="code">update_status t ~user ~repo s</code> applies the status <code class="code">s</code> of the
      repository <code class="code">user/repo</code> to the transaction <code class="code">t</code>.<br>
</div>
<br>
<h1 id="1_Pullrequests">Pull requests</h1><br>

<pre><span id="VALpr"><span class="keyword">val</span> pr</span> : <code class="type"><a href="Datakit_github.Conv.html#TYPEtree">tree</a> -><br>       user:string -><br>       repo:string -> int -> <a href="Datakit_github.PR.html#TYPEt">Datakit_github.PR.t</a> option <a href="Datakit_github.Conv.html#TYPEresult">result</a></code></pre><div class="info ">
<code class="code">pr t ~user ~repo n</code> is the <code class="code">n</code>'th pull-request of the repostiry
      <code class="code">user/repo</code> in <code class="code">t</code>.<br>
</div>

<pre><span id="VALprs"><span class="keyword">val</span> prs</span> : <code class="type">?repos:Datakit_github.Repo.Set.t -><br>       <a href="Datakit_github.Conv.html#TYPEtree">tree</a> -><br>       Datakit_github.PR.Set.t <a href="Datakit_github.Conv.html#TYPEresult">result</a></code></pre><div class="info ">
<code class="code">prs t</code> is the list of pull requests stored in <code class="code">t</code>.<br>
</div>

<pre><span id="VALupdate_pr"><span class="keyword">val</span> update_pr</span> : <code class="type">DK.Transaction.t -> <a href="Datakit_github.PR.html#TYPEt">Datakit_github.PR.t</a> -> unit <a href="Datakit_github.Conv.html#TYPEresult">result</a></code></pre><div class="info ">
<code class="code">update_pr t ~user ~repo pr</code> applies the pull-request <code class="code">pr</code> of
      the repository <code class="code">user/repo</code> to the transaction <code class="code">t</code>.<br>
</div>
<br>
<h1 id="1_Snapshotsanddiffs">Snapshots and diffs</h1><br>

<pre><span id="VALdiff"><span class="keyword">val</span> diff</span> : <code class="type"><a href="Datakit_github.Conv.html#TYPEtree">tree</a> -><br>       DK.Commit.t -> Datakit_github.Diff.Set.t <a href="Datakit_github.Conv.html#TYPEresult">result</a></code></pre><div class="info ">
<code class="code">diff tree c</code> computes the Github diff between the branch <code class="code">b</code>
      and the commit <code class="code">c</code>.<br>
</div>

<pre><span id="VALsnapshot"><span class="keyword">val</span> snapshot</span> : <code class="type">?old:DK.Commit.t * <a href="Datakit_github.Snapshot.html#TYPEt">Datakit_github.Snapshot.t</a> -><br>       <a href="Datakit_github.Conv.html#TYPEtree">tree</a> -><br>       <a href="Datakit_github.Snapshot.html#TYPEt">Datakit_github.Snapshot.t</a> <a href="Datakit_github.Conv.html#TYPEresult">result</a></code></pre><div class="info ">
<code class="code">snapshot ?old t</code> is a snapshot of the tree <code class="code">t</code>. Note: this is
      expensive, so try to provide a previous (recent) snapshot <code class="code">prev</code>
      if possible.<br>
</div>

<pre><span id="VALapply"><span class="keyword">val</span> apply</span> : <code class="type"><a href="Datakit_github.Snapshot.html#TYPEt">Datakit_github.Snapshot.t</a> -><br>       <a href="Datakit_github.Conv.html#TYPEtree">tree</a> * Datakit_github.Diff.Set.t -><br>       <a href="Datakit_github.Snapshot.html#TYPEt">Datakit_github.Snapshot.t</a> <a href="Datakit_github.Conv.html#TYPEresult">result</a></code></pre><div class="info ">
<code class="code">apply s d</code> is the snapshot obtained by applying <code class="code">d</code> on top of
      <code class="code">s</code>. <code class="code">d</code> is a pair <code class="code">tree * diff</code> where <code class="code">diff</code> contains the
      pull-requests and status to consider while <code class="code">tree</code> is holding the
      respective state of these objects.<br>
</div>
</body></html>