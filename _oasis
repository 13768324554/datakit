OASISFormat: 0.4
Name:        i9p
Version:     0.1.0
Synopsis:    A Git-like database with a filesystem interface
Authors:     Thomas Leonard, Magnus Skjegstad, Dave Scott, Thomas Gazagnaire
License:     ISC
Plugins:     META (0.4), DevFiles (0.4)

BuildTools:    ocamlbuild
AlphaFeatures: pure_interface, ocamlbuild_more_args

Library fs9p
  Path:            src/fs9p/
  Findlibname:     fs9p
  InternalModules: Fs9p_error, Fs9p_misc
  Modules:         Fs9p_inode, Fs9p_file, Fs9p_dir, Fs9p_fs
  BuildDepends:    protocol-9p.unix

Document fs9p
  Title:                FS9p docs
  Type:                 ocamlbuild (0.4)
  BuildTools+:          ocamldoc
  Install:              true
  XOCamlbuildPath:      src
  XOCamlbuildLibraries: fs9p
  XOCamlbuildExtraArgs:
    "-docflags '-t Fs9p -colorize-code -short-functors -charset utf-8'"

Library i9p
  Path:            src/i9p/
  Findlibname:     i9p
  InternalModules:
  Modules:         I9p_irmin, I9p_merge, I9p_tree
  BuildDepends:    protocol-9p.unix,irmin.unix,fs9p

Document i9p
  Title:                I9p docs
  Type:                 ocamlbuild (0.4)
  BuildTools+:          ocamldoc
  Install:              true
  XOCamlbuildPath:      src
  XOCamlbuildLibraries: i9p
  XOCamlbuildExtraArgs:
    "-docflags '-t Irmin9p -colorize-code -short-functors -charset utf-8'"

Executable datakit
  Path:           src/bin
  MainIs:         main.ml
  CompiledObject: best
  Install:        true
  BuildDepends:   i9p, cmdliner

Executable "datakit-mount"
  Path:           src/bin
  MainIs:         mount.ml
  CompiledObject: best
  Install:        true
  BuildDepends:   i9p, cmdliner

Executable test
  Path:           tests
  MainIs:         test.ml
  Build$:         flag(tests)
  CompiledObject: best
  Install:        false
  BuildDepends:   i9p, alcotest

Test test
  Run$:             flag(tests)
  Command:          $test -q
  WorkingDirectory: .
