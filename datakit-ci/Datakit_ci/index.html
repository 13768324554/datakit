<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Datakit_ci (datakit-ci.Datakit_ci)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">datakit-ci</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Datakit_ci</span></h1></header><p>Datakit CI</p><p><code class="code">Datakit_ci</code> is a library to describe reproducible, cachable and
distributed computations. The library is specialiazed to handle
build pipelines, where computations can take time, and where
seeing the live outputs of the computation is as useful as the
final step (think of live-logs of long-running builds).</p><p>The <a href="index.html#core">Core</a> of <code class="code">Datakit_ci</code> are <a href="Term/index.html">term</a>combinators to
describe the composition of long-running computation jobs, with an
attached, individual <a href="Output/index.html">output</a> (which can be
<span class="xref-unresolved" title="unresolved &quot;livelogs&quot;">live</span>). A project <span class="xref-unresolved" title="unresolved &quot;config&quot;">configuration</span> tied
together a collection of job description and a simple description
for the <span class="xref-unresolved" title="unresolved &quot;web&quot;">web</span> interface, whose access is granted using
<span class="xref-unresolved" title="unresolved &quot;acl&quot;">ACLs</span>.</p><p>TODO.</p><h2 id="core" class="anchored"><a href="#core" class="anchor"></a>Core</h2><div class="spec module" id="module-DK"><a href="#module-DK" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="DK/index.html">DK</a> : <a href="../../datakit-client/Datakit_client/index.html#module-type-S">Datakit_client.S</a></code></div><div class="doc"><p>Datakit client library.</p></div></div><div class="spec module" id="module-Live_log"><a href="#module-Live_log" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Live_log/index.html">Live_log</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Output"><a href="#module-Output" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Output/index.html">Output</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec type" id="type-status"><a href="#type-status" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a status</code><code></code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-status.result" class="anchored"><td class="def field"><a href="#type-status.result" class="anchor"></a><code>result : (<span class="type-var">'a</span>, [ `Pending of string<span class="keyword"> * </span>unit Lwt.t | `Failure of string ]) Pervasives.result;</code></td></tr><tr id="type-status.output" class="anchored"><td class="def field"><a href="#type-status.output" class="anchor"></a><code>output : <a href="Output/index.html#type-logs">Output.logs</a>;</code></td></tr></table><code>}</code><code></code></div><div class="doc"><p>The type for term status. It is a mix between the usual error
monad, but where we also keep a local log for every
computation. Morever, computation can be long-running, so there is
a new <code class="code">`Pending</code> state with an indication of when the term is
complete.</p></div></div><div class="spec type" id="type-job_id"><a href="#type-job_id" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>job_id</code><code></code><code></code></div><div class="doc"><p>The type for job IDs. They are used to identfy the worker actually
doing the computation.</p></div></div><div class="spec module" id="module-Target"><a href="#module-Target" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Target/index.html">Target</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Term"><a href="#module-Term" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Term/index.html">Term</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-ACL"><a href="#module-ACL" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="ACL/index.html">ACL</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Web"><a href="#module-Web" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Web/index.html">Web</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Config"><a href="#module-Config" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Config/index.html">Config</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec val" id="val-run"><a href="#val-run" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>run : ?&#8288;info:Cmdliner.Term.info <span class="keyword">&#8209;&gt;</span> <a href="Config/index.html#type-t">Config.t</a> Cmdliner.Term.t <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">run ?info config</code> runs DataKitCI. <code class="code">info</code> defaults to a term that
describes the binary as <code class="code">DataKitCI</code>, but does not include any of
the other metadata such as versioning. Call Cmdliner.Term.info
directly to obtain an <code class="code">info</code> value that exposes all this extra
data on the resulting command line.</p></div></div><div class="spec val" id="val-logs"><a href="#val-logs" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>logs : <a href="Live_log/index.html#type-manager">Live_log.manager</a></code></div><div class="doc"><p>The singleton log manager.</p></div></div><h2 id="extensions" class="anchored"><a href="#extensions" class="anchor"></a>Extensions</h2><div class="spec module" id="module-Process"><a href="#module-Process" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Process/index.html">Process</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Monitored_pool"><a href="#module-Monitored_pool" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Monitored_pool/index.html">Monitored_pool</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Git"><a href="#module-Git" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Git/index.html">Git</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Docker"><a href="#module-Docker" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Docker/index.html">Docker</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h2 id="cache" class="anchored"><a href="#cache" class="anchor"></a>Cache</h2><div class="spec module-type" id="module-type-BUILDER"><a href="#module-type-BUILDER" class="anchor"></a><div class="def module-type"><code><span class="keyword">module type </span><a href="module-type-BUILDER/index.html">BUILDER</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><div class="spec module" id="module-Cache"><a href="#module-Cache" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Cache/index.html">Cache</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><h2>Utils</h2><p>This should probably be replaced by something else or not be
exposed at all.</p><div class="spec module" id="module-Utils"><a href="#module-Utils" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Utils/index.html">Utils</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div><p>/ *</p><div class="spec module" id="module-Private"><a href="#module-Private" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Private/index.html">Private</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"></div></div></body></html>