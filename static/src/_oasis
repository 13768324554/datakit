OASISFormat: 0.4
Name:        datakit
Version:     0.1.0
Synopsis:    Distributed dataflow engine
Authors:     Qi Li, David Sheets, Thomas Gazagnaire
License:     ISC
Plugins:     META (0.3), DevFiles (0.3)
BuildTools:  ocamlbuild

Library datakit
  Install: false
  Path: lib
  InternalModules: Gol
  Modules:
    Id, Task, Job, Cmd, Source, Worker, Store, Scheduler, Version, Url, Exec,
    GitSource, Flow
  BuildDepends:
    irmin.unix, lwt, uuidm, fmt, nocrypto, uri, jsont.jsonm, hex, bytes

Library "datakit-worker"
  Install: false
  Path: lib/worker
  FindlibParent: datakit
  FindlibName: worker
  InternalModules: Common_worker
  Modules: Task_worker, Job_worker
  BuildDepends:
    datakit, irmin.unix, threads, cstruct.unix, rresult, ocamlgraph

Document datakit
  Title:                DataKit docs
  Type:                 OCamlbuild (0.4)
  BuildTools+:          ocamldoc
  Install:              true
  XOCamlbuildPath:      lib
  XOCamlbuildLibraries: datakit, datakit.worker

Executable test_datakit
  Build$:           flag(tests)
  Path:             lib_test
  MainIs:           test.ml
  CompiledObject:   best
  Install:          false
  BuildDepends:     alcotest, datakit, datakit.worker

Test test_datakit
  Run$:             flag(tests)
  Command:          $test_datakit -q
  WorkingDirectory: lib_test/

Executable "dk-show"
  Path: bin
  MainIs: dk_show.ml
  CompiledObject: best
  BuildDepends: datakit, cmdliner

Executable "dk-work"
  Path: bin
  MainIs: dk_work.ml
  CompiledObject: best
  BuildDepends: datakit.worker, cmdliner

Executable "dk-schedule"
  Path: bin
  MainIs: dk_schedule.ml
  CompiledObject: best
  BuildDepends: datakit, cmdliner

Executable "dk-add"
  Path: bin
  MainIs: dk_add.ml
  CompiledObject: best
  BuildDepends: datakit, cmdliner

Executable "dk-publish"
  Path: bin
  MainIs: dk_publish.ml
  CompiledObject: best
  BuildDepends: datakit, cmdliner

Executable "dk"
  Path: bin
  MainIs: dk.ml
  CompiledObject: best
  BuildDepends: datakit, cmdliner

Library "datakit-github"
  Build: false
  Path: lib/github
  FindlibParent: datakit
  FindlibName: github
  Modules: Github_pr
  BuildDepends: datakit, datakit.worker, github.unix, lwt
